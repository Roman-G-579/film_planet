<main>
  <div class="filter-wrapper grid grid-cols-12 m-auto w-5/6 max-w-screen-xl gap-4 bg-neutral-100 dark:bg-neutral-900 p-4 rounded-lg mt-10  justify-center">
    <div  class="col-span-1">
      <p>Filters:</p>
    </div>

    <div class="year-filter-wrapper col-span-3">
      <p-iftalabel class="w-full md:w-56">
        <p-datePicker
          [(ngModel)]="selectedYear"
          view="year"
          [minDate]="minYear"
          [maxDate]="maxYear"
          dateFormat="yy"
          (onSelect)="filterByYear(selectedYear)"/>
        <label for="dd-year">Year</label>
      </p-iftalabel>
    </div>

    <div class="genre-filter-wrapper col-span-3 m-auto">
      <p-iftalabel class="w-full md:w-56">
        <p-select [(ngModel)]="selectedGenre" inputId="dd-mediaType" [options]="genres" [showClear]="true" styleClass="w-full" (onChange)="filterByGenre(selectedGenre)" (onClear)="removeGenreFilter()" />
        <label for="dd-mediaType">Genre</label>
      </p-iftalabel>
    </div>

    <div class="rating-filter-wrapper col-span-3 gap-4 m-auto">
      <div class="slider-top-wrapper flex justify-between">
        <label class="w-[13rem]" style="color: lightgrey;">Rating Range: <b>{{rangeValues[0].toPrecision(2)}}</b> - <b>{{rangeValues[1].toPrecision(2)}}</b></label>
        <p-button icon="pi pi-filter" size="small" raised (onClick)="filterByRating(rangeValues[0],rangeValues[1])"></p-button>
      </div>
      <div class="flex justify-center">
        <p-slider [(ngModel)]="rangeValues" [range]="true" [min]="0.0" [max]="10.0" step="0.1" styleClass="w-[12vw] mt-4" />
      </div>
<!--      <div class="row-span-2">-->
<!--      </div>-->
    </div>

    <div class="clear-btn-wrapper col-span-2 m-auto">
      <p-button icon="pi pi-times" (click)="clearFilters()" rounded raised />
    </div>
  </div>

  <div class="top-table-wrapper flex content-center justify-center mt-64">
    <p-table [value]="topTitles()" [tableStyle]="{ 'min-width': '60rem' }">
      <ng-template pTemplate="caption">
        <span class="text-xl font-bold">Top 100 {{resultCriteria()}}</span>

      </ng-template>
      <ng-template pTemplate="header">
        <tr>
          <th>Title</th>
          <th> </th>
          <th>Year</th>
          <th>{{selectedMediaType === MediaType.Film ? 'Directors' : 'Creators'}}</th>
          <th>Genres</th>
          <th>Rating</th>
        </tr>
      </ng-template>
      <ng-template pTemplate="body" let-item>
        <tr>
          <td>{{ item.title }}</td>
          <td>
            <img
              [src]="item.image"
              [alt]="item.title"
              class="w-24 rounded"
            />
          </td>
          <td>{{ item.year }}</td>
          <td>{{ selectedMediaType === MediaType.Film ? item.directors : item.creators}}</td>
          <td>{{ item.genres | genreNames }}</td>
          <td>{{ item.rating }}</td>
        </tr>
      </ng-template>
    </p-table>
  </div>
</main>
