<p-dialog header="Search for films or TV shows:" [modal]="true" [(visible)]="isSearchVisible" [style]="{ width: '80%', height: '90%', opacity: '90%' }" dismissableMask>
  <div class="flex justify-center gap-4 mb-4">
    <input
      #searchInput
      pInputText
      id="search-term"
      class="flex-auto h-14 text-2xl"
      style="font-family: Poppins, 'Helvetica Neue', sans-serif"
      autocomplete="off"
      (keydown.enter)=searchItem(searchInput.value)
    />
  </div>
  <div class="flex justify-end gap-2">
    <p-button
      label="Search"
      (click)="searchItem(searchInput.value)" />
  </div>

  <section class="table-wrapper  flex justify-center">
    <div class="card w-3/5">
      <p-dataView [value]="searchResults()" emptyMessage=" ">
        <ng-template pTemplate="list" let-searchResults>
          <div class="grid grid-cols-12 gap-4 grid-nogutter">
            <div class="col-span-12" *ngFor="let item of searchResults; let first = first">
              <div
                class="table-item-wrapper flex flex-col sm:flex-row sm:items-center p-6 gap-4"
                [ngClass]="{ 'border-t border-surface-200 dark:border-surface-700': !first }"
              >
                <div class="md:w-40 relative">
                  <a [routerLink]="item | itemUrl">
                    <img
                      class="block xl:block mx-auto rounded-border w-full"
                      src="{{item.poster_path | posterUrl: 1}}"
                      [alt]="item.title || item.name"
                    />
                  </a>
                </div>
                <div class="flex flex-col md:flex-row justify-between md:items-center flex-1 gap-6">
                  <div class="flex flex-row md:flex-col justify-between items-start gap-2">
                    <div>
                      <a class="no-underline" [routerLink]="item | itemUrl">
                        <div class="text-lg font-medium  mt-2 hover:text-primary "> {{ item.title || item.name}} </div>
                      </a>
                      <span class="font-medium text-secondary text-sm">{{ item.overview }}</span>
                    </div>
                    <div class="bg-surface-400 dark:bg-surface-700 p-1" style="border-radius: 30px">
                      <div
                        class="rating-inner-background flex items-center  dark:bg-surface-500 gap-2 justify-center py-1 px-2"
                        style="border-radius: 30px; box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.04), 0 1px 2px 0 rgba(0, 0, 0, 0.06)"
                      >
                        <span class="dark:text-surface-100 font-medium text-sm">{{item.vote_average | number:'1.0-1'}}</span>
                        <i class="pi pi-star-fill text-yellow-500"></i>
                      </div>
                    </div>
                  </div>
                  <div class="flex flex-col md:items-end gap-8">
                    <span class=" font-semibold ">{{ item.genre_ids | genreNames }}</span>
                    <div class="flex flex-row-reverse md:flex-row gap-2">
                      <p-button icon="pi pi-heart" [outlined]="true" />
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </ng-template>
      </p-dataView>
    </div>
  </section>
</p-dialog>
